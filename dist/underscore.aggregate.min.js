/*! underscore.aggregate - v0.2.0 - 2014-07-29 - Sergey Nosenko */
(function(n){function r(r,u,c){var e={};return n.each(u,function(u,i){n.isArray(u)||(u=[u]),n.each(u,function(n){e[i+"_"+n]=t[i](r,n,c)})}),e}function u(u,t,c,e){var i=n.groupBy(u,t,e);return n.each(i,function(n,u){i[u]=r(n,c,e)}),i}var t={sum:function(r,u,t){return n.reduce(r,function(r,c){var e=n.isFunction(u)?u(c,t):c[u];return r+e},0,t)},avg:function(r,u,t){var c=n.reduce(r,function(r,c){var e=n.isFunction(u)?u(c,t):c[u];return r+e},0,t),e=n.size(r);return e?c/e:null},count:function(r){var u=n.size(r);return u}};t.SUM=t.sum,t.AVG=t.avg,t.COUNT=t.count,n.mixin({aggregate:r,aggregateBy:u})})(_);